# 프로블레마(Problema) 암호화 알고리즘 설계

## 1. 설계 목표

1. 애니그마의 로터 기반 치환 암호 메커니즘을 현대적으로 개선
2. AES의 치환-순열 네트워크(SPN) 구조의 강점 활용
3. 한글과 영어를 포함한 다국어 텍스트 지원
4. 높은 암호화 강도와 복잡성 제공
5. 효율적인 구현 가능성 확보

## 2. 핵심 구성 요소

### 2.A 개선된 애니그마 메커니즘

기존 애니그마의 핵심 메커니즘을 다음과 같이 개선하였다:

1. **확장된 로터 시스템**:
   - 기존 애니그마의 3-4개 로터 대신 8개의 가상 로터 사용
   - 각 로터는 유니코드 문자 매핑을 위한 확장된 치환표 보유
   - 로터 회전 메커니즘을 비선형적으로 개선하여 예측 가능성 감소

2. **다차원 플러그보드**:
   - 기존 애니그마의 단순 문자 쌍 교환 대신 다차원 문자 매핑 구현
   - 유니코드 평면 간 문자 매핑을 통한 복잡성 증가
   - 플러그보드 설정이 암호화 과정 중 동적으로 변화

3. **리플렉터 개선**:
   - 양방향 매핑 대신 단방향 매핑을 사용하여 보안성 강화
   - 다중 리플렉터 시스템을 통한 복잡성 증가

### 2.B AES 통합 요소

AES의 강력한 특성을 다음과 같이 통합한다:

1. **SubBytes 변환**:
   - AES의 S-Box 개념을 확장하여 유니코드 문자에 적용
   - 비선형 치환을 통한 혼돈(confusion) 증가

2. **ShiftRows 및 MixColumns 개념**:
   - 문자 블록에 대한 행 이동 및 열 혼합 연산 적용
   - 확산(diffusion) 특성 강화

3. **키 스케줄링**:
   - AES 스타일의 키 확장 알고리즘 적용
   - 라운드별 서브키 생성을 통한 보안성 강화

### 2.C 유니코드 처리 시스템

한글과 영어를 포함한 다양한 문자를 처리하기 위한 시스템:

1. **유니코드 매핑**:
   - 모든 입력 텍스트를 유니코드 코드 포인트로 변환
   - UTF-8 인코딩 지원으로 다국어 호환성 확보

2. **문자 세트 정규화**:
   - 한글과 영어 문자를 동일한 암호화 프레임워크 내에서 처리
   - 조합형 한글 문자의 효율적 처리

## 3. 암호화 프로세스

프로블레마 알고리즘의 암호화 과정은 다음과 같은 단계로 구성된다:

### 3.A 초기화 단계

1. **키 설정**:
   - 사용자 제공 키를 기반으로 로터 초기 위치, 플러그보드 설정, AES 라운드 키 생성
   - 키 길이는 256비트로 설정하여 높은 보안성 확보

2. **시스템 초기화**:
   - 로터 시스템, 플러그보드, AES 컴포넌트 초기화
   - 초기 상태 벡터(IV) 설정

### 3.B 암호화 단계

각 문자(또는 문자 블록)에 대해 다음 과정을 수행한다:

1. **유니코드 변환**:
   - 입력 문자를 유니코드 코드 포인트로 변환
   - 한글과 영어 문자를 동일한 프레임워크에서 처리

2. **애니그마 단계**:
   - 개선된 플러그보드를 통한 초기 치환
   - 다중 로터 시스템을 통한 연속적 치환
   - 리플렉터를 통한 추가 치환
   - 역방향 로터 통과(기존 애니그마와 달리 비대칭적 처리)

3. **AES 단계**:
   - 문자 블록에 SubBytes 변환 적용
   - ShiftRows 및 MixColumns 연산 적용
   - 라운드 키와 XOR 연산

4. **피드백 메커니즘**:
   - 이전 출력이 다음 입력의 암호화에 영향을 미치는 피드백 루프 구현
   - 블록 간 의존성 생성으로 패턴 분석 방지

### 3.C 마무리 단계

1. **출력 인코딩**:
   - 암호화된 데이터를 지정된 형식으로 인코딩(Base64, 16진수 등)
   - 메타데이터 추가(버전, 사용된 설정 등)

## 4. 복호화 프로세스

복호화 과정은 암호화의 역순으로 진행되며 다음의 특징을 지니고 있다:

1. **대칭성**:
   - 동일한 키를 사용하여 암호화 및 복호화 수행
   - 암호화 단계의 정확한 역순 적용

2. **상태 복원**:
   - 암호화 시 사용된 정확한 초기 상태 복원
   - 로터 위치, 플러그보드 설정 등의 정확한 재현

## 5. 보안 특성

프로블레마 알고리즘은 다음과 같은 보안 특성을 제공한다:

1. **높은 엔트로피**:
   - 256비트 키 공간으로 무차별 대입 공격에 대한 저항성
   - 비선형 연산을 통한 통계적 분석 방지

2. **혼돈과 확산**:
   - AES의 강력한 혼돈 및 확산 특성 활용
   - 입력의 작은 변화가 출력에 큰 변화를 초래

3. **알려진 공격에 대한 방어**:
   - 차분 암호 분석, 선형 암호 분석 등 현대적 공격 기법에 대한 저항성
   - 애니그마의 역사적 취약점 보완

## 6. 성능 고려사항

1. **계산 효율성**:
   - 최적화된 연산을 통한 효율적인 구현 가능성
   - 하드웨어 가속 가능성 고려

2. **메모리 요구사항**:
   - 확장된 로터 및 S-Box에 필요한 메모리 최적화
   - 캐시 친화적 데이터 구조 설계

## 7. 구현 가이드라인

C 언어로 구현하며 다음과 같은 사항들을 고려하였다:

1. **모듈화**:
   - 핵심 구성 요소별 모듈 분리
   - 유지보수 및 확장성을 고려한 설계

2. **최적화**:
   - 성능 중요 부분에 대한 최적화
   - 비트 연산 및 룩업 테이블 활용

3. **테스트**:
   - 다양한 입력에 대한 철저한 테스트
   - 한글과 영어가 혼합된 텍스트에 대한 특별 테스트